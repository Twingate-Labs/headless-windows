name: windows_headless_example

on: workflow_dispatch

jobs:
  demo:
    runs-on: windows-latest
    steps:
      - name: Install Twingate
        run: |
          Invoke-WebRequest https://api.twingate.com/download/windows?installer=msi -OutFile .\twingate_client.msi
          Set-Content .\service_key.json ${{ secrets.SERVICE_KEY }}
          .\twingate_client.msi service_secret=.\service_key.json /qn
          Start-Service twingate.service
          Start-Sleep -Seconds 10
          Get-Service twingate.service

